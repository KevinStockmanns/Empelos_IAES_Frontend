<main class="main content">
    <section class="user-create">
        <h1 class="title">Crear Usuario</h1>

        <form class="form" [formGroup]="form">
            <div class="form-div">
                <div class="form-div-input" [class.hasValue]="utils.hasValue(form, 'nombre')" [class.error]="utils.hasOneError(form, 'nombre')">
                    <input type="text" formControlName="nombre">
                    <label>Nombre</label>
                </div>
                @if (utils.hasError(form, 'nombre', 'required')) {
                    <p class="form-input-error">El nombre es requerido</p>
                }
                @if (utils.hasError(form, 'nombre', 'minlength')) {
                    <p class="form-input-error">El nombre debe tener al menos {{utils.getError(form, 'nombre', 'minlength').requiredLength}} caracteres</p>
                }
                @if (utils.hasError(form, 'nombre', 'maxlength')) {
                    <p class="form-input-error">El nombre es acepta hasta {{utils.getError(form, 'nombre', 'maxlength').requiredLength}} caracteres</p>
                }
                @if (utils.hasError(form, 'nombre', 'pattern')) {
                    <p class="form-input-error">El nombre solo acepta letras</p>
                }
            </div>

            <div class="form-div">
                <div class="form-div-input" [class.hasValue]="utils.hasValue(form, 'apellido')" [class.error]="utils.hasOneError(form, 'apellido')">
                    <input type="text" formControlName="apellido">
                    <label>Apellido</label>
                </div>
                @if (utils.hasError(form, 'apellido', 'required')) {
                    <p class="form-input-error">El apellido es requerido</p>
                }
                @if (utils.hasError(form, 'apellido', 'minlength')) {
                    <p class="form-input-error">El apellido debe tener al menos {{utils.getError(form, 'apellido', 'minlength').requiredLength}} caracteres</p>
                }
                @if (utils.hasError(form, 'apellido', 'maxlength')) {
                    <p class="form-input-error">El apellido es acepta hasta {{utils.getError(form, 'apellido', 'maxlength').requiredLength}} caracteres</p>
                }
                @if (utils.hasError(form, 'apellido', 'pattern')) {
                    <p class="form-input-error">El apellido solo acepta letras</p>
                }
            </div>

            <div class="form-div">
                <div class="form-div-input" [class.hasValue]="utils.hasValue(form, 'correo')" [class.error]="utils.hasOneError(form, 'correo')">
                    <input type="email" formControlName="correo">
                    <label>Correo</label>
                </div>
                @if (utils.hasError(form, 'correo', 'required')) {
                    <p class="form-input-error">El correo es requerido</p>
                }
                @if (utils.hasError(form, 'correo', 'email')) {
                    <p class="form-input-error">El correo es inválido</p>
                }
            </div>

            <div class="form-div">
                <div class="form-div-input" [class.hasValue]="utils.hasValue(form, 'dni')" [class.error]="utils.hasOneError(form, 'dni')">
                    <input type="number" formControlName="dni">
                    <label>DNI</label>
                </div>
                @if (utils.hasError(form, 'dni', 'required')) {
                    <p class="form-input-error">El DNI es requerido</p>
                }
                @if (utils.hasError(form, 'dni', 'minlength')) {
                    <p class="form-input-error">El dni debe tener al menos {{utils.getError(form, 'dni', 'minlength').requiredLength}} caracteres</p>
                }
                @if (utils.hasError(form, 'dni', 'maxlength')) {
                    <p class="form-input-error">El dni es acepta hasta {{utils.getError(form, 'dni', 'maxlength').requiredLength}} caracteres</p>
                }
                @if (utils.hasError(form, 'dni', 'pattern')) {
                    <p class="form-input-error">El dni es inválido</p>
                }
            </div>

            <div class="form-div">
                <div class="form-div-input hasValue" [class.error]="utils.hasOneError(form, 'fechaNacimiento')">
                    <input type="date" formControlName="fechaNacimiento">
                    <label>Fecha de Nacimiento</label>
                </div>
                @if (utils.hasError(form, 'fechaNacimiento', 'required')) {
                    <p class="form-input-error">La fecha de nacimiento es requerida</p>
                }
                @if (utils.hasError(form, 'fechaNacimiento', 'requiredAge')) {
                    <p class="form-input-error">Debe tener al menos {{utils.getError(form, 'fechaNacimiento', 'requiredAge')}} años</p>
                }
            </div>

            <div class="form-div">
                <div class="form-div-input" [class.hasValue]="utils.hasValue(form, 'rol')" [class.error]="utils.hasOneError(form, 'rol')">
                    @if (roles.length>0) {
                        <select formControlName="rol">
                            @for (rol of roles; track $index) {
                                <option [value]="rol">{{rol}}</option>
                            }
                        </select>
                    }@else {
                        <input type="text" formControlName="rol">
                    }
                    <label>Rol</label>
                </div>
                @if (utils.hasError(form, 'rol', 'required')) {
                    <p class="form-input-error">El rol es requerido</p>
                }
            </div>

            <div class="form-div">
                <div class="form-div-input" [class.hasValue]="utils.hasValue(form, 'genero')" [class.error]="utils.hasOneError(form, 'genero')">
                    @if (generos.length>0) {
                        <select formControlName="genero">
                            @for (gen of generos; track $index) {
                                <option [value]="gen">{{gen}}</option>
                            }
                        </select>
                    }@else {
                        <input type="text" formControlName="genero">
                    }
                    <label>Género</label>
                </div>
                @if (utils.hasError(form, 'genero', 'required')) {
                    <p class="form-input-error">El género es requerido</p>
                }
            </div>

            <div class="form-div">
                <div class="form-div-input" [class.hasValue]="utils.hasValue(form, 'estado_civil')" [class.error]="utils.hasOneError(form, 'estado_civil')">
                    @if (estadosCivil.length>0) {
                        <select formControlName="estado_civil">
                            @for (est of estadosCivil; track $index) {
                                <option [value]="est">{{est}}</option>
                            }
                        </select>
                    }@else {
                        <input type="text" formControlName="estado_civil">
                    }
                    <label>Estado Civil</label>
                </div>
                @if (utils.hasError(form, 'estado_civil', 'required')) {
                    <p class="form-input-error">El estado civil es requerido</p>
                }
            </div>
        </form>

        <div class="form-buttons">
            @if (loading) {
                <app-loader></app-loader>
            }@else {
                <app-button (click)="onSubmit()" type="simple" text="AGREGAR"></app-button>
            }
        </div>
    </section>
</main>